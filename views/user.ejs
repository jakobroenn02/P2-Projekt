<%- include("./partials/header.ejs") %>
  <% if (!isLoggedIn) {%>
    <%- include("./partials/signinRedirect.ejs")%>
    <% } else { %>
      <h1 class="profile-welcome-title">Welcome <%= user.username %>
      </h1>
      <div class="user-page-upper">
        <div class="profile-bio">
          <div class="profile-picture">
            <img class="profile-picture-picture" src="/img/profileImg/profileImg<%= user.profileImageId %>.jpeg" />
          </div>
          <form class="bio-form" action="/user/bio/update" method="post">
            <label for="Bio" class="profile-bio-title">Bio</label>
            <button type="button" class="profile-bio-edit-button">Edit</button>
            <button type="submit" class="profile-bio-confirm-button" hidden>Confirm</button>
            <button type="button" class="profile-bio-cancel-button" hidden>Cancel</button>
            <div class="profile-bio-container">
              <div class="profile-bio-text" id="userBio">
                <%= user.bio %>
              </div>
              <input type="text" name="userId" value="<%= user._id %>" hidden>
            </div>
          </form>
        </div>
        <form class="profile-information-form" action="/user/info/update" method="post">
          <div class="profile-information-title">Your Information</div>
          <div class="profile-information-rows">

            <div class="profile-information-row">
              <button type="button" class="profile-information-edit-button">Edit</button>
              <button type="submit" class="profile-information-confirm-button" hidden>Confirm</button>
              <button type="button" class="profile-information-cancel-button" hidden>Cancel</button>
              <% if(hasTypeWrong){%>
                <div class="userpage-change-input-error">Username is already taken. Try a different one.</div>
              <%}%>
              <div class="profile-information-content-item-title"> First Name</div>
              <div class="profile-information-container user-information-text-container">
                <div class="profile-information-text" id="userFirstName">
                  <%= user.name.firstName %>
                </div>
              </div>
              <div class="profile-information-content-item-title"> Last Name</div>
              <div class="profile-information-container user-information-text-container">
                <div class="profile-information-text" id="userLastName">
                  <%= user.name.lastName %>
                </div>
              </div>
              <div class="profile-information-content-item-title"> Username</div>
              <div class="profile-information-container user-information-text-container">
                <div class="profile-information-text" id="userUsername">
                  <%= user.username %>
                </div>
              </div>
              <div class="profile-information-content-item-title"> Age</div>
              <div class="profile-information-container user-information-number-container">
                <div class="profile-information-text" id="userAge">
                  <%= user.age %> 
                </div>  
              </div>
              <div class="profile-information-content-item-title"> Location</div>
              <div class="profile-information-container user-information-select1-container">
                <div class="profile-information-text" id="userLocation">
                  <%= user.location %>
                </div>
              </div>
              <div class="profile-information-content-item-title"> Gender</div>
              <div class="profile-information-container user-information-select2-container">
                <div class="profile-information-text" id="userGender">
                  <%= user.gender %>
                </div>
              </div>
            </div>
            <input type="text" name="userId" value="<%= user._id %>" hidden>
        </form>
        <div class="profile-information-password-title">Change Your Password</div>
        <div class="profile-information-row">
          <div class="profile-information-content-item-icon-container">
            <div class="profile-information-content-item-title">New Password</div>
            <i class="fas fa-eye password-eye-icon" id="changePasswordEye"></i>
            <input class="profile-information-input-password" id="newPassword" type="password"
              placeholder="New Password">
          </div>
          <div class="profile-information-content-item-icon-container">
            <div class="profile-information-content-item-title">Confirm New Password</div>
            <i class="fas fa-eye password-eye-icon" id="confirmChangePasswordEye"></i>
            <input class="profile-information-input-password" id="newConfirmPassword" type="password" placeholder="Confirm New Password">
          </div> <!--TODO FIX-->
        </div>
      </div>
      <div class="profile-interests-all">
        <div class="profile-interests-container-title">Your Interests</div>
        <div class="profile-interests-container">
          <% for(let i=0; i<user.interests.length; i++) {%>
            <div class="profile-interests">
              <%= user.interests[i]%>
            </div>
            <%}%>
        </div>
        <a href="/user/interests">
          <button class="profile-change-interests-button">Change Interests</button>
        </a>
      </div>
      <div class="pictures-modal">
        <div class="modal-header">
          <div class="modal-header-title">Change Profile Picture</div>
          <div class="modal-header-close"><i class="fa-solid fa-xmark close-mark"></i></div> <!--TODO fix profilbillede-->
        </div>
        <div class="modal-pictures">
          <div class="modal-pictures-main">
            <div class="modal-main-picture-container">
              <img class="modalProfPic" src="/img/profileImg/profileImg<%= user.profileImageId %>.jpeg" alt="">
            </div>
          </div>
          <div class="modal-pictures-options">
            <div class="modal-pictures-options-container">
              <img class="pictureOption" id="1" src="/img/profileImg/profileImg1.jpeg" />
            </div>
            <div class="modal-pictures-options-container">
              <img class="pictureOption" id="2" src="/img/profileImg/profileImg2.jpeg" />
            </div>
            <div class="modal-pictures-options-container">
              <img class="pictureOption" id="3" src="/img/profileImg/profileImg3.jpeg" />
            </div>
          </div>
          <form method="post" action="/user/profile-picture/update">
            <input type="number" name="profileImageId" id="profileImageId" value="<%=user.profileImageId%>" class="profileImageIdNumber" hidden>  <!-- Prevents bad imageId by defaulting to id from db-->
          <button class="profilePictureChangeConfirm" type="submit" hidden>Confirm</button>
        </form>
        </div>
      </div>
      <script src="/js/userpage.js"></script>

      <%} %>
